#!/usr/bin/env bash
# -*- coding: utf-8 -*-

# git add, commit, then push


set -e

if [[ -z $1 ]]; then
	echo -n "Commit message: "; read m
else
	m="${*}"
fi

git add --all .
git commit -m "${m}"

b="$(git status -sb)"
if [[ $ == *"...origin/"* ]]; then
	git push "$(git rev-parse --abbrev-ref HEAD)"
else
	git push --set-upstream origin "$(git rev-parse --abbrev-ref HEAD)"
fi


set +e
