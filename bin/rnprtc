#!/usr/bin/env bash
# -*- coding: utf-8 -*-

# run a command, then cd into the last line and ls


i="0"
u=""
while true; do
	output="$(${1} ${@:2} --rnprtc-i ${i} --rnprtc-u ${u})"
	r="$(echo -e ${output} | cut -d "\`" -f1)"
	[[ ! -z "${r// }" ]] && echo "${r}"
	d="$(echo -e ${output} | tr "\n" " " | rev | cut -d "\`" -f1 | rev)"
	[[ ! -z "${d// }" ]] && break
	echo -n "? "; read u
	i="${i+1}"
done

d="${d// }"
echo "${d}"
printf "%*s" "${#d}" | tr " " "-"
echo
\cd "${d}"
l
